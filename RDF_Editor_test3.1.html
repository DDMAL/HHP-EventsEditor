<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="./style2.css" type="text/css" id="" media="print, projection, screen" />
</head>

<body>
<div class="title">
  <h1>RDF Web Editor Test Version</h1>
</div>

<table width="90%" id="mytab0"  border="1" class="t2">
  <tr>
    <td>
    <input type="file" value="import data" id="files" name="files[]"/><br>
    <output id="list"></output>
    <input type="button" id="savetext" class='btn blue' value="Export" onclick="Save()"/></div>  
    </td>
    <td>
    </td>
  </tr>
</table>
<br><br>
<table width="90%" id="mytab"  border="1" class="t2" style="word-break:break-all; word-wrap:break-all;">
  <thead>
  	<tr>
    <th width="25%" onclick="tablesort(this)">Subject</th>
    <th width="25%" onclick="tablesort(this)">Predicate</th>
    <th width="25%" onclick="tablesort(this)">Object</th>
    <th width="25%" onclick="tablesort(this)">Graph Name</th>
    <th width="5%">Delete</th>
   </tr>
  </thead>
	<tbody>
	</tbody>
</table> 
<div>
 <table width="90%">
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
<table width="90%" align="center">
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td><input name="xx" class='btn blue' type="button" value="Add" onclick="addRow()"/></td>
    <td><input name="xx" class='btn green' type="button" value="Delete" onclick="removeRow()"/></td>
  </tr>
</table>
</div>
</body>
</html>

<script>
        function doSave(value, type, name) {  
            var blob;  
            if (typeof window.Blob == "function") {  
               blob = new Blob([value], {type: type});  
            } else {  
            var BlobBuilder = window.BlobBuilder || window.MozBlobBuilder || window.WebKitBlobBuilder || window.MSBlobBuilder;  
            var bb = new BlobBuilder();  
            bb.append(value);  
            blob = bb.getBlob(type);  
            }  
            var URL = window.URL || window.webkitURL;  
            var bloburl = URL.createObjectURL(blob);  
            var anchor = document.createElement("a");  
            if ('download' in anchor) {  
            anchor.style.visibility = "hidden";  
            anchor.href = bloburl;  
            anchor.download = name;  
            document.body.appendChild(anchor);  
            var evt = document.createEvent("MouseEvents");  
            evt.initEvent("click", true, true);  
            anchor.dispatchEvent(evt);  
            document.body.removeChild(anchor);  
            } else if (navigator.msSaveBlob) {  
             navigator.msSaveBlob(blob, name);  
            } else {  
              location.href = bloburl;  
            }  
        }  
  
 
  

        function Save(){ 
            var tableobj = document.getElementById("mytab");
            var oTbody = tableobj.tBodies[0]; 
            var a=new Array();  
            for(var i=0;i<oTbody.rows.length;i++)
            {
               for (var j=0;j<4;j++)  
               {
                  var content0 = oTbody.rows[i].cells[j].getAttributeNode("id").value.replace('&lt;','<').replace(/<br>/gim,'\n');
                  var content1 = content0 .replace('&gt;','>');
                  content1 = escape(content1);
                  content1 = content1.replace(/%u/gim,'\\u').replace(/\"\</gim,'&lt;');
                  content1 = content1.replace(/%3/gim,'\\3').replace(/%2/gim,'\\2');
                  content1 = content1.replace(/%/gim,'\\u00');
                  content1 = content1.replace(/\\3/gim,'%3').replace(/\\2/gim,'%2');
                  content1 = unescape(content1);
                  subcontent_ind = content1.lastIndexOf('"')
                  if(subcontent_ind !== -1)
                  {
                    subcontent = content1.substring(1,subcontent_ind);
                    subcontent = subcontent.replace(/\"/gim,'\\"');
                    subcontent2 = content1.substring(subcontent_ind+1,content1.length);
                    if (content1.charAt(subcontent_ind+1) === '<')
                    {
                      content1 = content1.charAt(0).concat(subcontent).concat('"^^').concat(subcontent2).concat(content1.charAt(content1.length+1));
                    }
                    else
                    {
                       content1 = content1.charAt(0)+subcontent+'"'+subcontent2+content1.charAt(content1.length+1);
                    }
                  }
                  a.push(content1); 
                  a.push(' ');
              }
              a.push('.');
              a.push('\n');
            }
            doSave(a.join(''), "n/a", "webeditor_export.nq");   
        }
        
        // Indicate whether html is under edit
        var underEdit = false;

        // Indicate current order mode
        var isAsc = true;

        /*
           This Function is used to add one row in table
        */
        function addRow()
        {
          
            
             //  Get table element in html
            
            var tableobj = document.getElementById("mytab");
            var oTbody = tableobj.tBodies[0];
         

            var row = oTbody.insertRow(oTbody.rows.length);
           
           
            //  Set Row Attribute
           
            var att0=document.createAttribute("class");
            att0.value="a1"; 
            row.setAttributeNode(att0);
          

            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);

            //cell1.innerHTML = subject;
            var att1=document.createAttribute("ondblclick");
            att1.value="myFunction(this)"; 
            cell1.setAttributeNode(att1);

            //cell2.innerHTML = predicate;
            var att2=document.createAttribute("ondblclick");
            att2.value="myFunction(this)"; 
            cell2.setAttributeNode(att2);

            //cell3.innerHTML = object;
            var att3=document.createAttribute("ondblclick");
            att3.value="myFunction(this)"; 
            cell3.setAttributeNode(att3);

            //cell4.innerHTML = graphname;
            var att4=document.createAttribute("ondblclick");
            att4.value="myFunction(this)"; 
            cell4.setAttributeNode(att4);

            cell5.innerHTML = "<td align='center'><input type='checkbox' name='chkArr' style='width:20px' /></td>";
        }


        /*
           This Function is used to remove one row in table
        */
        
        function removeRow()
        {

          // get selected checkbox
          var chkObj = document.getElementsByName("chkArr");
          var tableobj = document.getElementById("mytab");
            
          for(var k=0;k<chkObj.length;k++){
                if(chkObj[k].checked){
                   tableobj.deleteRow(k+1);
                   k=-1;
               }
            }
        }

        /*
            This Function is used to change cell to edit mode
        */
        function myFunction(obj)
        {

          if(!underEdit)
          {
           //var x1 = obj.innerHTML;
           //alert(obj.getAttributeNode("id").value)
           var x1 = obj.getAttributeNode("id").value;

           // These are good parameters after test
           var rows_num = obj.offsetHeight/12;
           var cols_num = obj.offsetWidth/8;
           obj.innerHTML = "<textarea rows="+rows_num+ " cols="+cols_num+" onkeydown='showKeyCode(event,this)'>"+x1+"</textarea>";


           underEdit = true;
           obj.focus();
          }
        }
        
        /*
            This Function is used to finish editing the cell
        */
        function showKeyCode(e,obj)
        {
           // Keycode of 'Enter' is 13 
           if (e.keyCode === 13)
           {
              // The value in textarea within the cell
              var x2 = obj.value;

              obj.parentNode.getAttributeNode("id").value = x2;
              if(x2.charAt(0) === '<')
              {
                var show_sub2 = x2.substring(x2.lastIndexOf("/")+1, x2.length-1);
                obj.parentNode.innerHTML = show_sub2;
              }
              else if (x2.charAt(0) === '"')
              {
                obj.parentNode.innerHTML = x2;
                
              }
              
            }
            else if (e.keyCode === 17)
            {
              alert('fjdisjfao')
            }
            underEdit = false;
        }
        

        /*
           This function is used to sort the table
        */
        function tablesort(obj)
        {

             // Get the table body
             var oTable = document.getElementById('mytab');
             var oTbody = oTable.tBodies[0];
             var arr = [];
             var sortcolum;
             // alert(obj.innerHTML);
             if(obj.innerHTML=="Graph Name")
             {
              sortcolum = 3;
             }
             else if(obj.innerHTML=="Object")
             {
              sortcolum = 2;
             }
             else if(obj.innerHTML=="Predicate")
             {
                sortcolum = 1;
             }
             else if(obj.innerHTML=="Subject")
             {
                sortcolum = 0;
             }


            for (var i = 0; i < oTbody.rows.length; i++ ) {
                arr[i] = oTbody.rows[i];  

                }
                
            arr.sort(function (td1, td2){
                if(isAsc) {
                    return td1.cells[sortcolum].innerHTML.localeCompare(td2.cells[sortcolum].innerHTML);
                    } else {
                        return td2.cells[sortcolum].innerHTML.localeCompare(td1.cells[sortcolum].innerHTML);
                        }
                
                });
            for(var j =0; j < arr.length; j++) {
                oTbody.appendChild(arr[j]);
                }
            isAsc = !isAsc;
        }

   // Check is this browser support File APIs
   if (window.File && window.FileReader && window.FileList && window.Blob) {
   } else {
      alert('The File APIs are not fully supported in this browser.');
   }


  /*
       This Function is used to upload Files
  */
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      output.push('<li><strong>',f.name, '</strong> (', f.type || 'n/a', ') - ',
                  f.size, ' bytes, last modified: ',
                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '</li>');

    }

    var reader = new FileReader();
    reader.readAsText(files[0]); 
    var extensible_index = files[0].name.lastIndexOf(".");
    var extensible_length = files[0].name.length;
    var extensible = files[0].name.substring(extensible_index + 1,extensible_length);

    if(extensible === "nq") 
    {
    reader.onloadstart = loadstart;
    reader.onload = loadednq;
    }
    else if (extensible === "nt")
    {
    reader.onloadstart = loadstart;
    reader.onload = loadednt;

    }
    

    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';


  }

  /*
       This Function is used to clear previous upload files
  */
  function loadstart(evt)
  {
    var oTable = document.getElementById('mytab');
    var oTbody = oTable.tBodies[0];
    

    while(oTbody.rows.length!=0)
    {
      oTbody.deleteRow();
    }
  }

  /*
       This Function is used to read N-quad files
  */

  function loadednq(evt) {  
        var fileString = evt.target.result; 
        var item = fileString.split('\n');
        for(var i=0; i<item.length; i++)
        {

          // Chnage Characters which are not compatible with html
          var traslate_str =  unescape(item[i].replace(/\\u/gim,"%u").replace(/\\"/gim,'%inquo').replace(/\</gim,'%lt').replace(/\>/gim,'%gt').replace(/%20/gim,'%blank').replace(/\^\^/gim,''));
          traslate_str = traslate_str.replace(/\\n/gim,'<br>');
          var sub_ind;
          var sub_ind_quote;
          var subject;
          var show_sub;
        	
          // extract subject
          if(traslate_str.charAt(0) === '%' && traslate_str.charAt(1) === 'l' && traslate_str.charAt(2) === 't')
          {
            sub_ind = traslate_str.search(" ");
            var temp = traslate_str.substring(3,sub_ind-3)
        	  subject = '&lt;'+temp+'&gt;';
            show_sub = temp.substr(temp.lastIndexOf("/")+1);
          }
          else if(traslate_str.charAt(0) === '"')
          { 
               var template_str = traslate_str.substr(1);
               sub_ind = 0;
               sub_ind_quote = template_str.search('\"');
               var template_str2 = template_str.substr(sub_ind_quote+1);
               sub_ind_blank = template_str2.search(' ');
               template_str2 = template_str2.substring(0,sub_ind_blank);

              
               subject = traslate_str.substring(0,sub_ind_quote+2).concat(template_str2);
               show_sub = traslate_str.substring(0,sub_ind_quote+2);
               sub_ind_quote = sub_ind_quote + sub_ind_blank;

          }
          else 
          {
            sub_ind = traslate_str.search(" ");
            subject = traslate_str.substring(0,sub_ind);
            show_sub = subject;
          }
          subject = subject.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/,'&gt;').replace(/%blank/,' ');
          show_sub = show_sub.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/,'&gt;').replace(/%blank/,' ');

          //extract predicate
          var string_withour_sub;
          if(sub_ind === 0) 
            {
              string_withour_sub = traslate_str.substr(sub_ind_quote+3);
             
            }
          else {
              string_withour_sub = traslate_str.substr(sub_ind+1); 
            }   

        	var pred_ind;
          var show_predicate;
          if(string_withour_sub.charAt(0) === '%' && string_withour_sub.charAt(1) === 'l' && string_withour_sub.charAt(2) === 't')
          {
            pred_ind = string_withour_sub.search(" ");
            var temp = string_withour_sub.substring(3, pred_ind-3);
        	  predicate = '&lt;'+temp+'&gt;';
            show_predicate = temp.substr(temp.lastIndexOf("/")+1);
          }
          else if(string_withour_sub.charAt(0) === '"')
          {
            var template_str = string_withour_sub.substr(1);
            pred_ind = 0;
            pred_ind_quote = template_str.search('\"');
            var template_str2 = template_str.substr(pred_ind_quote+1);
            pred_ind_blank = template_str2.search(' ');
            template_str2 = template_str2.substring(0,pred_ind_blank);

            predicate = string_withour_sub.substring(0,pred_ind_quote+2).concat(template_str2);
            show_predicate = string_withour_sub.substring(0,pred_ind_quote+2);
            pred_ind_quote = pred_ind_quote + pred_ind_blank;
          }
          else 
          {
            pred_ind = string_withour_sub.search(" ");
            predicate = string_withour_sub.substring(0,pred_ind);
            show_predicate = predicate;
          }
          predicate = predicate.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');
          show_predicate = show_predicate.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');
          //alert(show_predicate);

          // extract object
          var string_without_pres;
          if(pred_ind === 0) 
            {
              string_without_pres = string_withour_sub.substr(pred_ind_quote+3);
             
            }
          else {
              string_without_pres = string_withour_sub.substr(pred_ind+1); 
            } 

          var obj_ind;
          var show_obj;
          if(string_without_pres.charAt(0) === '%' && string_without_pres.charAt(1) === 'l' && string_without_pres.charAt(2) === 't')
          {
            obj_ind = string_without_pres.search(" ");
            var temp = string_without_pres.substring(3,obj_ind-3)
            object = '&lt;' + temp + '&gt;';
            show_obj = temp.substr(temp.lastIndexOf("/")+1);
          }
          else if(string_without_pres.charAt(0) === '"')
          {
            var template_str = string_without_pres.substr(1);
            obj_ind = 0;
            obj_ind_quote = template_str.search('\"');
            var template_str2 = template_str.substr(obj_ind_quote+1);
            obj_ind_blank = template_str2.search(' ');
            template_str2 = template_str2.substring(0,obj_ind_blank);

            object = string_without_pres.substring(0,obj_ind_quote+2).concat(template_str2);
            if(template_str2.charAt(0) === '%' && template_str2.charAt(1) === 'l' && template_str2.charAt(2) === 't')
             {show_obj = string_without_pres.substring(0,obj_ind_quote+2);}
            else
              {show_obj = object;}
            obj_ind_quote = obj_ind_quote + obj_ind_blank;

          }
          else 
          {
            obj_ind = string_without_pres.search(" ");
            object = string_without_pres.substring(0,obj_ind);
            show_obj = object;

          }
          object = object.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');
          show_obj = show_obj.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');

        
          // extract graph name
          var string_without_obj;
          if(obj_ind === 0) 
            {
              string_without_obj = string_without_pres.substr(obj_ind_quote+3);
             
            }
          else {
              string_without_obj = string_without_pres.substr(obj_ind+1); 
            }   

          var graph_ind;
          var show_graph;

          if(string_without_obj.charAt(0) === '%' && string_without_obj.charAt(1) === 'l' && string_without_obj.charAt(2) === 't')
          {
            graph_ind = string_without_obj.search(" ");
            var temp = string_without_obj.substring(3,graph_ind-3)
            graphname = '&lt;'+temp+'&gt;';
            show_graph = temp.substr(temp.lastIndexOf("/")+1);
          }
          else if(string_without_obj.charAt(0) === '"')
          {
            var template_str = string_without_obj.substr(1);
            graph_ind = 0;
            graph_ind_quote = template_str.search('\"');
            var template_str2 = template_str.substr(graph_ind_quote+1);
            graph_ind_blank = template_str2.search(' ');
            template_str2 = template_str2.substring(0,graph_ind_blank);

            graphname = string_without_obj.substring(0,graph_ind_quote+2).concat(template_str2);
            show_graph = string_without_obj.substring(0,graph_ind_quote+2);
            graph_ind_quote = graph_ind_quote + graph_ind_blank;
          }
          else 
          {
            graph_ind = string_without_obj.search(" ");
            graphname = string_without_obj.substring(0,graph_ind);
            show_graph = graphname;
          }
          graphname = graphname.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');
         

          // show all stuff
         if(subject.length>0)
        {
        	        var oTable = document.getElementById('mytab');
                  var oTbody = oTable.tBodies[0];


        	        var row = oTbody.insertRow(oTbody.rows.length);
                  var att0=document.createAttribute("class");
                  att0.value="a1"; 
                  row.setAttributeNode(att0);
          

                  var cell1 = row.insertCell(0);
                  var cell2 = row.insertCell(1);
                  var cell3 = row.insertCell(2);
                  var cell4 = row.insertCell(3);
                  var cell5 = row.insertCell(4);

            cell1.innerHTML = show_sub;
            var att1=document.createAttribute("ondblclick");
            att1.value="myFunction(this)"; 
            cell1.setAttributeNode(att1);
            var att12=document.createAttribute("id");
            att12.value=subject; 
            cell1.setAttributeNode(att12);
            var att13=document.createAttribute("show");
            att13.value=show_sub; 
            cell1.setAttributeNode(att13);

            cell2.innerHTML = show_predicate;
            var att2=document.createAttribute("ondblclick");
            att2.value="myFunction(this)"; 
            cell2.setAttributeNode(att2);
            var att22=document.createAttribute("id");
            att22.value=predicate; 
            cell2.setAttributeNode(att22);
            var att23=document.createAttribute("show");
            att23.value=show_predicate; 
            cell2.setAttributeNode(att23);

            cell3.innerHTML = show_obj;
            var att3=document.createAttribute("ondblclick");
            att3.value="myFunction(this)"; 
            cell3.setAttributeNode(att3);
            var att32=document.createAttribute("id");
            att32.value=object; 
            cell3.setAttributeNode(att32);
            var att33=document.createAttribute("show");
            att33.value=show_obj; 
            cell3.setAttributeNode(att33);

            cell4.innerHTML = show_graph;
            var att4=document.createAttribute("ondblclick");
            att4.value="myFunction(this)"; 
            cell4.setAttributeNode(att4);
            var att42=document.createAttribute("id");
            att42.value=graphname; 
            cell4.setAttributeNode(att42);
            var att43=document.createAttribute("show");
            att43.value=graphname; 
            cell4.setAttributeNode(att43);

            cell5.innerHTML = "<td align='center'><input type='checkbox' name='chkArr' style='width:20px' /></td>";

           }

        }  
    }  

    function loadednt(evt) {  
        var fileString = evt.target.result; 
        var item = fileString.split('\n');
        for(var i=0; i<item.length; i++)
        {
           // Chnage Characters which are not compatible with html
          var traslate_str =  unescape(item[i].replace(/\\u/gim,"%u").replace(/\\"/gim,'%inquo').replace(/\</gim,'%lt').replace(/\>/gim,'%gt').replace(/%20/gim,'%blank').replace(/\^\^/gim,''));
          traslate_str = traslate_str.replace(/\\n/gim,'<br>');
          var sub_ind;
          var sub_ind_quote;
          var subject;
          var show_sub;
          
          // extract subject
          if(traslate_str.charAt(0) === '%' && traslate_str.charAt(1) === 'l' && traslate_str.charAt(2) === 't')
          {
            sub_ind = traslate_str.search(" ");
            var temp = traslate_str.substring(3,sub_ind-3)
            subject = '&lt;'+temp+'&gt;';
            show_sub = temp.substr(temp.lastIndexOf("/")+1);
          }
          else if(traslate_str.charAt(0) === '"')
          { 
               var template_str = traslate_str.substr(1);
               sub_ind = 0;
               sub_ind_quote = template_str.search('\"');
               var template_str2 = template_str.substr(sub_ind_quote+1);
               sub_ind_blank = template_str2.search(' ');
               template_str2 = template_str2.substring(0,sub_ind_blank);

              
               subject = traslate_str.substring(0,sub_ind_quote+2).concat(template_str2);
               show_sub = traslate_str.substring(0,sub_ind_quote+2);
               sub_ind_quote = sub_ind_quote + sub_ind_blank;

          }
          else 
          {
            sub_ind = traslate_str.search(" ");
            subject = traslate_str.substring(0,sub_ind);
            show_sub = subject;
          }
          subject = subject.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/,'&gt;').replace(/%blank/,' ');
          show_sub = show_sub.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/,'&gt;').replace(/%blank/,' ');

          //extract predicate
          var string_withour_sub;
          if(sub_ind === 0) 
            {
              string_withour_sub = traslate_str.substr(sub_ind_quote+3);
             
            }
          else {
              string_withour_sub = traslate_str.substr(sub_ind+1); 
            }   

          var pred_ind;
          var show_predicate;
          if(string_withour_sub.charAt(0) === '%' && string_withour_sub.charAt(1) === 'l' && string_withour_sub.charAt(2) === 't')
          {
            pred_ind = string_withour_sub.search(" ");
            var temp = string_withour_sub.substring(3, pred_ind-3);
            predicate = '&lt;'+temp+'&gt;';
            show_predicate = temp.substr(temp.lastIndexOf("/")+1);
          }
          else if(string_withour_sub.charAt(0) === '"')
          {
            var template_str = string_withour_sub.substr(1);
            pred_ind = 0;
            pred_ind_quote = template_str.search('\"');
            var template_str2 = template_str.substr(pred_ind_quote+1);
            pred_ind_blank = template_str2.search(' ');
            template_str2 = template_str2.substring(0,pred_ind_blank);

            predicate = string_withour_sub.substring(0,pred_ind_quote+2).concat(template_str2);
            show_predicate = string_withour_sub.substring(0,pred_ind_quote+2);
            pred_ind_quote = pred_ind_quote + pred_ind_blank;
          }
          else 
          {
            pred_ind = string_withour_sub.search(" ");
            predicate = string_withour_sub.substring(0,pred_ind);
            show_predicate = predicate;
          }
          predicate = predicate.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');
          show_predicate = show_predicate.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');
          //alert(show_predicate);

          // extract object
          var string_without_pres;
          if(pred_ind === 0) 
            {
              string_without_pres = string_withour_sub.substr(pred_ind_quote+3);
             
            }
          else {
              string_without_pres = string_withour_sub.substr(pred_ind+1); 
            } 

          var obj_ind;
          var show_obj;
          if(string_without_pres.charAt(0) === '%' && string_without_pres.charAt(1) === 'l' && string_without_pres.charAt(2) === 't')
          {
            obj_ind = string_without_pres.search(" ");
            var temp = string_without_pres.substring(3,obj_ind-3)
            object = '&lt;' + temp + '&gt;';
            show_obj = temp.substr(temp.lastIndexOf("/")+1);
          }
          else if(string_without_pres.charAt(0) === '"')
          {
            var template_str = string_without_pres.substr(1);
            obj_ind = 0;
            obj_ind_quote = template_str.search('\"');
            var template_str2 = template_str.substr(obj_ind_quote+1);
            obj_ind_blank = template_str2.search(' ');
            template_str2 = template_str2.substring(0,obj_ind_blank);

            object = string_without_pres.substring(0,obj_ind_quote+2).concat(template_str2);
            show_obj = string_without_pres.substring(0,obj_ind_quote+2);
            obj_ind_quote = obj_ind_quote + obj_ind_blank;
            // alert("fjdifjos")

          }
          else 
          {
            obj_ind = string_without_pres.search(" ");
            object = string_without_pres.substring(0,obj_ind);
            show_obj = object;

          }
          object = object.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');
          show_obj = show_obj.replace(/%inquo/gim,'\"').replace(/%lt/gim,'&lt;').replace(/%gt/gim,'&gt;').replace(/%blank/,' ');

        
          // extract graph name
          var string_without_obj;
          if(obj_ind === 0) 
            {
              string_without_obj = string_without_pres.substr(obj_ind_quote+3);
             
            }
          else {
              string_without_obj = string_without_pres.substr(obj_ind+1); 
            }   
         

            if(subject.length>0)
            {
          var oTable = document.getElementById('mytab');
          var oTbody = oTable.tBodies[0];


          var row = oTbody.insertRow(oTbody.rows.length);
          var att0=document.createAttribute("class");
          att0.value="a1"; 
          row.setAttributeNode(att0);
          

            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);

 
            cell1.innerHTML = show_sub;
            var att1=document.createAttribute("ondblclick");
            att1.value="myFunction(this)"; 
            cell1.setAttributeNode(att1);
            var att12=document.createAttribute("id");
            att12.value=subject; 
            cell1.setAttributeNode(att12);

            cell2.innerHTML = show_predicate;
            var att2=document.createAttribute("ondblclick");
            att2.value="myFunction(this)"; 
            cell2.setAttributeNode(att2);
            var att22=document.createAttribute("id");
            att22.value=predicate; 
            cell2.setAttributeNode(att22);

            cell3.innerHTML = show_obj;
            var att3=document.createAttribute("ondblclick");
            att3.value="myFunction(this)"; 
            cell3.setAttributeNode(att3);
            var att32=document.createAttribute("id");
            att32.value=object; 
            cell3.setAttributeNode(att32);

            cell5.innerHTML = "<td align='center'><input type='checkbox' name='chkArr' style='width:20px' /></td>";

           }
        }  
    }  

  document.getElementById('files').addEventListener('change', handleFileSelect, false);

</script>
















